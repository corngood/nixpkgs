From e962e4b4285258e54a78956ad62e8090cb71126f Mon Sep 17 00:00:00 2001
From: David McFarland <corngood@gmail.com>
Date: Sun, 11 Aug 2024 00:03:36 -0300
Subject: [PATCH 2/2] disable parallel compile

---
 nukebuild/Build.cs | 10 +++++++++-
 1 file changed, 9 insertions(+), 1 deletion(-)

diff --git a/nukebuild/Build.cs b/nukebuild/Build.cs
index c71a0c1e3..1af258221 100644
--- a/nukebuild/Build.cs
+++ b/nukebuild/Build.cs
@@ -142,12 +142,20 @@ DotNetTestSettings ApplySetting(DotNetTestSettings c, Configure<DotNetTestSettin
             ProcessTasks.StartProcess("xcodebuild", args).AssertZeroExitCode();
         });
 
+    [Serializable]
+    public class SerialBuildSettings : DotNetBuildSettings
+    {
+        protected override Arguments ConfigureProcessArguments(Arguments arguments) =>
+            base.ConfigureProcessArguments(arguments)
+                .Add("-m:1");
+    }
+
     Target Compile => _ => _
         .DependsOn(Clean, CompileNative)
         .DependsOn(CompileHtmlPreviewer)
         .Executes(() =>
         {
-            DotNetBuild(c => ApplySetting(c)
+            DotNetBuild(ApplySetting(new SerialBuildSettings())
                 .SetProjectFile(Parameters.MSBuildSolution)
             );
         });
-- 
2.47.1

